<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>{% block subtitulo %} {% endblock%}</title>
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  <link rel="stylesheet" href="{{url_for('static', filename='templates/bootstrap/css/bootstrap.min.css')}}">
  <link rel="stylesheet" href="{{url_for('static', filename='templates/bootstrap/css/jquery.dataTables.min.css')}}">
  <link rel="stylesheet" href="{{url_for('static', filename='templates/fontawesome/css/all.min.css')}}">
  <link rel="stylesheet" href="{{url_for('static', filename='templates/bootstrap/css/ionicons.min.css')}}">
  <link rel="stylesheet" href="{{url_for('static', filename='templates/dist/css/AdminLTE.min.css')}}">

  <link rel="stylesheet" href="{{url_for('static', filename='templates/dist/css/skins/_all-skins.min.css')}}">
  <link rel="stylesheet" href="{{url_for('static', filename='templates/plugins/iCheck/flat/blue.css')}}">
  <link rel="stylesheet" href="{{url_for('static', filename='templates/plugins/morris/morris.css')}}">
  <link rel="stylesheet" href="{{url_for('static', filename='templates/plugins/jvectormap/jquery-jvectormap-1.2.2.css')}}">
  <link rel="stylesheet" href="{{url_for('static', filename='templates/plugins/datepicker/datepicker3.css')}}">
  <link rel="stylesheet" href="{{url_for('static', filename='templates/plugins/daterangepicker/daterangepicker-bs3.css')}}">
  <link rel="stylesheet" href="{{url_for('static', filename='templates/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css')}}">
  <link rel="stylesheet" href="{{url_for('static', filename='plugins/datatables/dataTables.bootstrap.css')}}">

</head>

<body class="hold-transition skin-blue sidebar-mini">
  <div class="wrapper">

    <header class="main-header">
      <a href="{{url_for('initiative_list')}}" class="logo">
        <span class="logo-mini"><b>G</b>I</span>
        <span class="logo-lg">Gestor de iniciativas</span>
      </a>
      <nav class="navbar navbar-static-top" role="navigation">
        <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
          <span class="sr-only">Toggle navigation</span>
        </a>
        <div class="navbar-custom-menu">
          <ul class="nav navbar-nav">
            <li class="dropdown user user-menu">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                <span class="hidden-xs">Usuario do sistema</span>
              </a>
              <ul class="dropdown-menu">
                <li class="user-header">
                  <p>
                    Usuario - logado no sistema
                  </p>
                </li>
                <li class="user-footer">
                  <div class="pull-left">
                    <a href="#" class="btn btn-default btn-flat">Perfil</a>
                  </div>
                  <div class="pull-right">
                    <a href="{{url_for('initiative_list')}}" class="btn btn-default btn-flat">Sair</a>
                  </div>
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </nav>
    </header>
    <aside class="main-sidebar">
      <section class="sidebar">
        <ul class="sidebar-menu">
          <li class="header"></li>

          <li>
            <a href="{{url_for('user_list')}}">
              <i class="fa-solid fa-user"></i> <span> Usuarios </span>
            </a>
          </li>

          <li>
            <a href="{{url_for('initiative_list')}}">
              <i class="fa-solid fa-tasks"></i> <span> Iniciativa </span>
            </a>
          </li>
        </ul>
      </section>
    </aside>
    <div class="content-wrapper">
      {% block conteudo %}
      {% endblock %}
    </div>
    <footer class="main-footer">
      <div class="pull-right hidden-xs">
        <b>Versão</b> 1.0
      </div>
      <strong>Copyright &copy; 2024 <a href="#">Gritt.net</a>.</strong>
    </footer>
    <div class="control-sidebar-bg"></div>
  <script src="{{url_for('static', filename='templates/plugins/jQuery/jQuery-2.1.4.min.js')}}"></script>
  <!-- jQuery UI 1.11.4 -->
  <script src="{{url_for('static', filename='templates/bootstrap/js/jquery-ui.min.js')}}"></script>
  <!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
  <script>
    $.widget.bridge('uibutton', $.ui.button);
  </script>
  <!-- Bootstrap 3.3.5 -->
  <script src="{{url_for('static', filename='templates/bootstrap/js/bootstrap.min.js')}}"></script>
  <script src="{{url_for('static', filename='templates/bootstrap/js/jquery-3.5.1.js')}}"></script>
  <script src="{{url_for('static', filename='templates/bootstrap/js/jquery.dataTables.min.js')}}"></script>

  <!-- Morris.js charts -->
  <script src="{{url_for('static', filename='templates/bootstrap/js/raphael-min.js')}}"></script>
  <script src="{{url_for('static', filename='templates/plugins/morris/morris.min.js')}}"></script>
  <!-- Sparkline -->
  <script src="{{url_for('static', filename='templates/plugins/sparkline/jquery.sparkline.min.js')}}"></script>
  <!-- jvectormap -->
  <script src="{{url_for('static', filename='templates/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js')}}"></script>
  <script
    src="{{url_for('static', filename='templates/plugins/jvectormap/jquery-jvectormap-world-mill-en.js')}}"></script>
  <!-- jQuery Knob Chart -->
  <script src="{{url_for('static', filename='templates/plugins/knob/jquery.knob.js')}}"></script>
  <!-- daterangepicker -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.2/moment.min.js"></script>
  <script src="{{url_for('static', filename='templates/plugins/daterangepicker/daterangepicker.js')}}"></script>
  <!-- datepicker -->
  <script src="{{url_for('static', filename='templates/plugins/datepicker/bootstrap-datepicker.js')}}"></script>
  <!-- Bootstrap WYSIHTML5 -->
  <script
    src="{{url_for('static', filename='templates/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js')}}"></script>
  <!-- Slimscroll -->
  <script src="{{url_for('static', filename='templates/plugins/slimScroll/jquery.slimscroll.min.js')}}"></script>
  <!-- FastClick -->
  <script src="{{url_for('static', filename='templates/plugins/fastclick/fastclick.min.js')}}"></script>
  <!-- AdminLTE App -->
  <script src="{{url_for('static', filename='templates/dist/js/app.min.js')}}"></script>
  <!-- AdminLTE dashboard demo (This is only for demo purposes) -->
  <script src="{{url_for('static', filename='templates/dist/js/pages/dashboard.js')}}"></script>
  <!-- AdminLTE for demo purposes -->
  <!-- DataTables -->
  <script src="{{url_for('static', filename='templates/plugins/datatables/jquery.dataTables.min.js')}}"></script>
  <script src="{{url_for('static', filename='templates/plugins/datatables/dataTables.bootstrap.min.js')}}"></script>
  <script>
    $(document).ready(function () {
      $('#example').DataTable();
    });
  </script>
  <script>
    //Mascara para o telefone
    const handlePhone = (event) => {
      let input = event.target
      input.value = phoneMask(input.value)
    }

    const phoneMask = (value) => {
      if (!value) return ""
      value = value.replace(/\D/g, '')
      value = value.replace(/(\d{2})(\d)/, "($1) $2")
      value = value.replace(/(\d)(\d{4})$/, "$1-$2")
      return value
    }

    function ValidaCPF() {

      var cpf = document.forms.usuario.cpf.value;
      var cpfValido = /^(([0-9]{3}.[0-9]{3}.[0-9]{3}-[0-9]{2}))$/;
      if (cpfValido.test(cpf) == false) {
        cpf = cpf.replace(/\D/g, ""); //Remove tudo o que não é dígito
        if (cpf.length == 11) {
          cpf = cpf.replace(/(\d{3})(\d)/, "$1.$2"); //Coloca um ponto entre o terceiro e o quarto dígitos
          cpf = cpf.replace(/(\d{3})(\d)/, "$1.$2"); //Coloca um ponto entre o terceiro e o quarto dígitos
          //de novo (para o segundo bloco de números)
          cpf = cpf.replace(/(\d{3})(\d{1,2})$/, "$1-$2"); //Coloca um hífen entre o terceiro e o quarto dígitos
          var valorValido = document.getElementById("cpf").value = cpf;
        } else {
          alert("Formato do CPF invalido, por favor digite um CPF valido");
          return false;
        }
      }
    }


    //Torna alguns campos do cadastro de organizações obrigatório
    function enviardados() {

      if (document.dados_organi.nome_organi.value == "") {
        alert("Obrigatório preencher nome da organização!");
        document.dados_organi.nome_organi.focus();
        return false;
      }

      return true;
    }

    //Torna alguns campos do cadastro de usuario obrigatório
    function enviardados_user() {

      if (document.dados_user.nome.value == "") {
        alert("Obrigatório preencher nome do usuario no sistema!");
        document.dados_user.nome.focus();
        return false;
      }

      if (document.dados_user.email.value == "") {
        alert("Obrigatório preencher email do usuario no sistema!");
        document.dados_user.email.focus();
        return false;
      }
      return true;
    }

    //Torna alguns campos do cadastro de coletores obrigatório
    function enviardados_coleta() {

      if (document.dados_coleta.dispositivo.value == "") {
        alert("Obrigatório preencher ID do dispositivo!");
        document.dados_coleta.dispositivo.focus();
        return false;
      }

      if (document.dados_coleta.serie.value == "") {
        alert("Obrigatório preencher serie do dispositivo!");
        document.dados_coleta.dispositivo.focus();
        return false;
      }

      return true;
    }

    document.getElementById('cnpj').addEventListener('input', function (e) {
      var x = e.target.value.replace(/\D/g, '').match(/(\d{0,2})(\d{0,3})(\d{0,3})(\d{0,4})(\d{0,2})/);
      e.target.value = !x[2] ? x[1] : x[1] + '.' + x[2] + '.' + x[3] + '/' + x[4] + (x[5] ? '-' + x[5] : '');
    });


  </script>
  <script>
    let value_cpf = document.querySelector('#campo_cpf');

    value_cpf.addEventListener("keydown", function (e) {
      if (e.key > "a" && e.key < "z") {
        e.preventDefault();
      }
    });

    value_cpf.addEventListener("blur", function (e) {
      //Remove tudo o que não é dígito
      let validar_cpf = this.value.replace(/\D/g, "");

      //verificação da quantidade números
      if (validar_cpf.length == 11) {

        // verificação de CPF valido
        var Soma;
        var Resto;

        Soma = 0;
        for (i = 1; i <= 9; i++) Soma = Soma + parseInt(validar_cpf.substring(i - 1, i)) * (11 - i);
        Resto = (Soma * 10) % 11;

        if ((Resto == 10) || (Resto == 11)) Resto = 0;
        if (Resto != parseInt(validar_cpf.substring(9, 10))) return alert("CPF Inválido!");;

        Soma = 0;
        for (i = 1; i <= 10; i++) Soma = Soma + parseInt(validar_cpf.substring(i - 1, i)) * (12 - i);
        Resto = (Soma * 10) % 11;

        if ((Resto == 10) || (Resto == 11)) Resto = 0;
        if (Resto != parseInt(validar_cpf.substring(10, 11))) return alert("CPF Inválido!");;

        //formatação final
        cpf_final = validar_cpf.replace(/(\d{3})(\d)/, "$1.$2");
        cpf_final = cpf_final.replace(/(\d{3})(\d)/, "$1.$2");
        cpf_final = cpf_final.replace(/(\d{3})(\d{1,2})$/, "$1-$2");
        document.getElementById('campo_cpf').value = cpf_final;

      } else {
        alert("CPF Inválido! É esperado 11 dígitos numéricos.")
      }

    })

  </script>
  <script>
    var input = document.getElementById('dispositivo');
    input.addEventListener('keyup', (event) => {
      let regEx = /^[0-9a-fA-F]+$/;
      let isHex = regEx.test(event.target.value.toString());
      if (!isHex) {
        input.value = input.value.slice(0, -1);
      }
    })
  </script>

  <script>
    $().alert('close')
  </script>


</body>

</html>